{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册页面</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="{% static '/plugins/jquery-3.6.4.min.js' %}"></script>
    <style>
        .register-container {
            width: 100%;
            max-width: 330px;
            padding: 15px;
            margin: auto;
            margin-top: 50px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="register-container">
        <h1 class="h3 mb-3 fw-normal">注册</h1>
        <input type="text" class="form-control" id="phone" placeholder="手机号">
        <input type="text" class="form-control" id="email" placeholder="邮箱">
        <input type="password" class="form-control" id="password" placeholder="密码">
        <input type="password" class="form-control" id="password2" placeholder="确认密码">
        <button class="btn btn-lg btn-primary mt-3" id="register-btn">注册</button>
    </div>

</div>
</div>

<script>
    $("#register-btn").on("click", function () {
        // 获取输入的注册信息
        const phone = $("#phone").val();
        const email = $("#email").val();
        const password = $("#password").val();
        const password2 = $("#password2").val();

        // 对输入的信息进行简单验证
        if (!phone || !email || !password) {
            alert("请填写完整的注册信息");
            return;
        } else if (password !== password2) {
            alert("两次输入的密码不一致");
            return;
        }

        // 发送注册请求到后端
        $.ajax({
            url: "/jobs/register/", // 后端注册接口
            method: "POST",
            data: {
                phone: phone,  // 手机号
                email: email,  // 邮箱
                password: password // 密码
            },
            success: function (response) {
                if (response.code === 0) {
                    alert("注册成功");
                    window.location.href = "/jobs/login/"; // 跳转到登录页面
                } else {
                    alert("注册失败：" + response.msg);
                }
            },
            error: function () {
                alert("请求失败，请稍后重试");
            }

        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>